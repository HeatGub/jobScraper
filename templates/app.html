<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plot and Table</title>
  <!-- DEFINE CSS VARIABLES FROM SETTINGS.PY IN :ROOT TO ACCESS THEM ANYWHERE -->
  {{ cssRoot|safe }}
  <!-- MAIN CSS FILE -->
  <link rel="stylesheet" href="{{ url_for('static', filename='app.css') }}">
  <!-- BOKEH RESOURCES -->
  {{ resources|safe }}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> <!-- TRASH BIN ICON -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"> <!-- PLUS ICON -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Trirong">
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Anonymous Pro'>
  <link href='https://fonts.googleapis.com/css?family=Anta' rel='stylesheet'>
</head>

<body>

  <div id="mainContainer">
    
    <!-- FORM -->
    <div class="categoryContainer">
      <div class="categoryShowHideDiv">QUERY TOOL</div>
        <div class="categoryContent" style="display: flex;"> <!--style="display: flex;"-->

          <form id="mainForm">
            <table>
              <thead>
                <tr>
                  <th scope="col" class="constantWidthColumnParameters">hover for description</th>
                  <th scope="col" class="constantWidthColumnShow">show?<p id="checkUncheckAll">&cross;</p>
                  </th>
                  <th scope="col" class="flexibleWidthColumn">necessary</th>
                  <th scope="col" class="flexibleWidthColumn">forbidden</th>
                  <th scope="col" class="constantWidthColumnAboveAndBelow">above</th>
                  <th scope="col" class="constantWidthColumnAboveAndBelow">below</th>
                </tr>
              </thead>
              {% for columnDict in databaseColumns %}
              <tr>
                <td title="{{columnDict.description}}">{{columnDict.displayName}}</td>
                <td><input type="checkbox" class="ckeckBox" checked="checked" name={{columnDict.dbColumnName}}Show></td>
                {% if columnDict.dbColumnName != "salaryMin" and columnDict.dbColumnName != "salaryMax" %}
                <td><input type="text" placeholder="(a OR b OR c) AND (d OR e)" name={{columnDict.dbColumnName}}Necessary></td>
                <td><input type="text" placeholder="((NULL AND a AND b) OR (c OR d) OR (f AND g))" name={{columnDict.dbColumnName}}Forbidden></td>
                {% elif columnDict.dbColumnName == "salaryMin" or columnDict.dbColumnName == "salaryMax" %}
                <td><input type="text" placeholder="420" name={{columnDict.dbColumnName}}Necessary></td>
                <td><input type="text" placeholder="NULL OR 0" name={{columnDict.dbColumnName}}Forbidden></td>
                {% endif %}
                {% if columnDict.dbColumnName == "datetimeFirst" or columnDict.dbColumnName == "datetimeLast" %}
                <td><input type="datetime-local" name={{columnDict.dbColumnName}}Above></td>
                <td><input type="datetime-local" name={{columnDict.dbColumnName}}Below></td>
                {% elif columnDict.dbColumnName == "salaryMin" or columnDict.dbColumnName == "salaryMax" %}
                <td><input type="number" placeholder="1337" name={{columnDict.dbColumnName}}Above></td>
                <td><input type="number" placeholder="1000000" name={{columnDict.dbColumnName}}Below></td>
                {% endif %}
              </tr>

              <!-- <tr>
                <td title="{{columnDict.description}}">{{columnDict.displayName}}</td>
                <td><input type="checkbox" class="ckeckBox" checked="checked" name={{columnDict.dbColumnName}}Show></td>
                {% if columnDict.dbColumnName != "salaryMin" and columnDict.dbColumnName != "salaryMax" %}
                <td><input type="text" placeholder="(a OR b OR c) AND (d OR e)" name={{columnDict.dbColumnName}}Necessary></td>
                <td><input type="text" placeholder="((a AND b AND c) OR (d OR e) OR (f AND g))" name={{columnDict.dbColumnName}}Forbidden></td>
                {% elif columnDict.dbColumnName == "salaryMin" or columnDict.dbColumnName == "salaryMax" %}
                <td></td>
                <td></td>
                {% endif %}
                {% if columnDict.dbColumnName == "datetimeFirst" or columnDict.dbColumnName == "datetimeLast" %}
                <td><input type="datetime-local" name={{columnDict.dbColumnName}}Above></td>
                <td><input type="datetime-local" name={{columnDict.dbColumnName}}Below></td>
                {% elif columnDict.dbColumnName == "salaryMin" or columnDict.dbColumnName == "salaryMax" %}
                <td><input type="number" placeholder="4200" name={{columnDict.dbColumnName}}Above></td>
                <td><input type="number" placeholder="100000" name={{columnDict.dbColumnName}}Below></td>
                {% endif %}
              </tr> -->

              {% endfor %}
            </table>
            <!-- <div class="fetchDiv"> -->
              <input type="submit" value="SEARCH" id="sendFormAndFetchBokehButton">
              <div id="sendFormAndFetchBokehOutput"></div>
            <!-- </div> -->
          </form>

        </div>
    </div>

    <!-- RESULTS & DOWNLOAD CSV -->
    <div class="categoryContainer">
      <div class="categoryShowHideDiv">DOWNLOAD</div>
        <div id="categoryContentResultsAndDownload" class="categoryContent" style="display: flex;">
          <h1 id="resultsAmount"></h1>
          <div id="downloadCsvContainer">
            <div id="downloadCsvIcon"></div>
            <div id="downloadCsvText"></div>
          </div>
        </div>
    </div>

    <!-- QUERY -->
    <div class="categoryContainer">
      <div class="categoryShowHideDiv">QUERY</div>
        <div class="categoryContent" style="display: flex;">
          <span contenteditable="true" id="queryDiv" spellcheck="false"></span>
        </div>
    </div>

    <!-- PLOT -->
    <div class="categoryContainer">
      <div class="categoryShowHideDiv">PLOT</div>
        <div class="categoryContentBokeh" style="display: block;">
          <div id="plotDiv"></div>
        </div>
    </div>

    <!-- TABLE -->
    <div class="categoryContainer">
      <div class="categoryShowHideDiv">TABLE</div>
        <div class="categoryContentBokeh" style="display: block;">
          <div id="tableDiv"></div>
        </div>
    </div>

    <!-- TEST BROWSER -->
    <div class="categoryContainer">
      <div class="categoryShowHideDiv">TEST BROWSER</div>
      <!-- style="display: flex;" OTHERWISE JS CANT RECOGNIZE STYLE.DISPLAY -->
      <div class="categoryContent" style="display: flex;">
          <button id="openBrowserButton">OPEN</button>
          <div id="openBrowserOutput" class="testBrowserOutput">open the browser to update cookies.json</div>
          <button id="saveCookiesToJsonButton" >UPDATE COOKIES</button>
          <div id="saveCookiesToJsonOutput" class="testBrowserOutput"></div>
        </div>
    </div>

    <!-- SCRAPING CONTAINER  -->
    <div class="categoryContainer">
      <div class="categoryShowHideDiv">SCRAPING BROWSERS</div>
        <div class="categoryContent" style="display: flex;">
          <div id="fullScrapingDivsContainer"></div>
          <button id="addNewProcessButton"><i class="fas fa-plus"></i></button> <!-- HTML plus -->
        </div>
    </div>

  </div> <!--mainContainer -->

  <script src="{{ url_for('static', filename='app.js') }}"></script>

</body>

</html>